const axios = require("axios");

const availableEmojis = [
  "😂",
  "😇",
  "🙃",
  "😍",
  "😜",
  "😘",
  "🤓",
  "😎",
  "😢",
  "🤯",
  "😱",
  "🤔",
  "😶",
  "😵",
  "🤐",
  "🤢",
  "🤧",
  "😷",
  "🤕",
  "🤑",
  "🤠",
  "😈",
  "🤡",
  "💩",
  "👻",
  "☠️",
  "👽",
  "👾",
  "🤖",
  "🎃",
  "💪",
  "💋",
  "💄",
  "👂",
  "👃",
  "👣",
  "👁️",
  "👀",
  "🧠",
  "👶",
  "👏",
  "🤝",
  "🙌",
  "👍",
  "👎",
  "✊",
  "✌️",
  "🤘",
  "👌",
  "👉",
  "👋",
  "✍️",
  "🙏",
  "💅",
  "🤳",
  "💃",
  "👕",
  "👖",
  "👗",
  "👙",
  "👘",
  "👠",
  "👢",
  "👞",
  "👟",
  "🎩",
  "👒",
  "🎓",
  "👑",
  "💍",
  "👛",
  "💼",
  "🎒",
  "🐶",
  "🐱",
  "🐭",
  "🐰",
  "🦊",
  "🐻",
  "🐼",
  "🐮",
  "🐨",
  "🐯",
  "🦁",
  "🐷",
  "🐽",
  "🐸",
  "🐵",
  "🙈",
  "🐔",
  "🐧",
  "🐣",
  "🦆",
  "🦅",
  "🦉",
  "🦇",
  "🐺",
  "🐗",
  "🐴",
  "🦄",
  "🐝",
  "🐛",
  "🦋",
  "🐌",
  "🐞",
  "🐜",
  "🕷️",
  "🕸️",
  "🦂",
  "🐢",
  "🐍",
  "🦎",
  "🐊",
  "🦍",
  "🦏",
  "🐙",
  "🦀",
  "🐬",
  "🐋",
  "🦈",
  "🐘",
  "🐪",
  "🐃",
  "🐑",
  "🐐",
  "🦌",
  "🦃",
  "🐀",
  "🐾",
  "🐉",
  "🌵",
  "🌲",
  "🌴",
  "🍀",
  "🎋",
  "🍁",
  "🍄",
  "🐚",
  "💐",
  "🌹",
  "🌸",
  "🌻",
  "🌕",
  "🌙",
  "⭐",
  "✨",
  "⚡",
  "☄️",
  "💥",
  "🔥",
  "🌪️",
  "🌈",
  "☀️",
  "☁️",
  "❄️",
  "⛄",
  "💨",
  "💦",
  "🌊",
  "🍎",
  "🍐",
  "🍊",
  "🍋",
  "🍌",
  "🍉",
  "🍇",
  "🍓",
  "🍈",
  "🍒",
  "🍑",
  "🍍",
  "🥝",
  "🍆",
  "🥑",
  "🥒",
  "🌶️",
  "🌽",
  "🥕",
  "🥔",
  "🥐",
  "🍞",
  "🧀",
  "🥚",
  "🍳",
  "🥞",
  "🥓",
  "🍗",
  "🌭",
  "🍔",
  "🍟",
  "🍕",
  "🥙",
  "🌮",
  "🌯",
  "🥗",
  "🍝",
  "🍜",
  "🍣",
  "🍱",
  "🍤",
  "🍚",
  "🍘",
  "🍥",
  "🍡",
  "🍦",
  "🎂",
  "🍭",
  "🍬",
  "🍫",
  "🍿",
  "🍩",
  "🍪",
  "🥜",
  "🌰",
  "🍯",
  "🥛",
  "🍼",
  "☕",
  "🍵",
  "🍶",
  "🍺",
  "🍷",
  "🥃",
  "🍸",
  "🍾",
  "🥄",
  "🍽️",
  "⚽",
  "🏀",
  "🏈",
  "⚾",
  "🎾",
  "🏐",
  "🎱",
  "🏓",
  "🏸",
  "🏒",
  "🏏",
  "🥅",
  "⛳",
  "🏹",
  "🎣",
  "🥊",
  "🥋",
  "🎽",
  "⛸️",
  "🎿",
  "🏆",
  "🎖️",
  "🎟️",
  "🎪",
  "🎭",
  "🎨",
  "🎬",
  "🎤",
  "🎧",
  "🎼",
  "🎹",
  "🥁",
  "🎷",
  "🎺",
  "🎸",
  "🎻",
  "🎲",
  "♟️",
  "🎯",
  "🎳",
  "🎮",
  "🎰",
  "🚗",
  "🏎️",
  "🚓",
  "🚑",
  "🚒",
  "🚚",
  "🚜",
  "🚲",
  "🛵",
  "🏍️",
  "🚨",
  "🚠",
  "🚂",
  "✈️",
  "💺",
  "🚀",
  "🚁",
  "🛶",
  "⛵",
  "🚢",
  "⚓",
  "🚧",
  "🚦",
  "🗺️",
  "🗿",
  "🗽",
  "🗼",
  "🏰",
  "🏯",
  "🏟️",
  "🎡",
  "🎢",
  "🎠",
  "🏖️",
  "⛰️",
  "🏕️",
  "🏠",
  "🏭",
  "🏥",
  "🏦",
  "🏛️",
  "⛪",
  "🕌",
  "🕍",
  "🗾",
  "⌚",
  "📱",
  "💻",
  "🖨️",
  "🕹️",
  "💾",
  "📷",
  "🎥",
  "📟",
  "📺",
  "📻",
  "🎛️",
  "⏰",
  "⌛",
  "📡",
  "🔋",
  "🔌",
  "💡",
  "🔦",
  "🕯️",
  "🛢️",
  "💵",
  "💰",
  "💳",
  "💎",
  "⚖️",
  "🔧",
  "🔩",
  "⚙️",
  "⛓️",
  "🔫",
  "💣",
  "🔪",
  "🗡️",
  "🛡️",
  "🚬",
  "⚰️",
  "🏺",
  "🔮",
  "📿",
  "💈",
  "🔭",
  "🔬",
  "🕳️",
  "💊",
  "💉",
  "🚽",
  "🚰",
  "🚿",
  "🛋️",
  "🔑",
  "🚪",
  "🗄️",
  "📎",
  "📏",
  "📐",
  "📌",
  "✂️",
  "🗑️",
  "🖼️",
  "🛍️",
  "🛒",
  "🎁",
  "🎈",
  "🎏",
  "🎀",
  "🎉",
  "🎎",
  "🏮",
  "🎐",
  "✉️",
  "📦",
  "📜",
  "📈",
  "🗞️",
  "📓",
  "📖",
  "🖍️",
  "✏️",
  "🔒",
  "❤️",
  "💔",
  "✝️",
  "☪️",
  "🕉️",
  "☸️",
  "✡️",
  "🕎",
  "☯️",
  "☦️",
  "♈",
  "♉",
  "♊",
  "♋",
  "♌",
  "♍",
  "♎",
  "♏",
  "♐",
  "♑",
  "♒",
  "♓",
  "🆔",
  "⚛️",
  "☢️",
  "🆚",
  "🆘",
  "🚫",
  "🚭",
  "💯",
  "❗",
  "❓",
  "⚠️",
  "🔱",
  "⚜️",
  "♻️",
  "🏧",
  "🆒",
  "🆕",
  "🆓",
  "🆙",
  "🎵",
  "➕",
  "💱",
  "🔔",
  "♠️",
  "♣️",
  "🃏",
  "🀄",
  "🏁",
];
const LIMIT = 3; // for now its from 3 to 5
let startIndex = 0;

function getQueryString(emoji) {
  return emoji.trim().repeat(LIMIT);
}

async function apiCall(queryString, index) {
  let url = `https://a.y.at/emoji_id/search?emoji_id=${queryString}`;
  url = url.trim();
  url = encodeURI(url);
  try {
    const response = await axios.get(url);
    const isAvailable = response.data.result.available;
    console.log(index, queryString, url);
    console.log(response.data.result.availability);
    if (isAvailable) {
      console.log("Available", url, index, queryString);
      console.log(response.data);
    }
  } catch (error) {
    console.log("Error at queryString", queryString, "index=", index);
    console.log(error);
  }
}

async function startLoop(index) {
  if (index >= availableEmojis.length) {
    console.log("finished the function");
    return;
  }
  const queryString = getQueryString(availableEmojis[index]);
  await apiCall(queryString, index);
  startLoop(index + 1);
}

startLoop(startIndex);
